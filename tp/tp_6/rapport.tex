\documentclass[a4paper, 12pt, openany]{book}
\usepackage[a4paper, lmargin=2cm,rmargin=2cm, tmargin=3cm, bmargin=3cm]{geometry} % Needed to have even margins

\usepackage{titlesec}
\usepackage{titletoc}
\usepackage{hyperref}
\usepackage[french]{babel}
\usepackage{xcolor}
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage{graphicx}
\usepackage{fancyhdr}

\input{inputs/code.tex} % Code formatting package, handle C language

\titlespacing*{\chapter}{0pt}{-50pt}{40pt} % Remove chapter padding

\fancypagestyle{plain}{\fancyhf{}\renewcommand{\headrulewidth}{0pt}} % To clear page numbers from footer, and header line at the start of every chapter
\pagestyle{fancy}
\fancyhf{}% Clear header/footer
\fancyhead[L]{\nouppercase\leftmark}
\fancyhead[R]{\thepage}

% Format 
\addto\captionsfrench{\renewcommand{\chaptername}{Exercice}}
\renewcommand{\thechapter}{\arabic{chapter}}
\renewcommand{\lstlistingname}{Code} % Change the caption label to "Code"

% Colors definition
\definecolor{titlecolor}{HTML}{007A7B} % Define title color
\hypersetup{colorlinks=true,linkcolor=titlecolor,urlcolor=blue} % Setup hyperlinks color

% Command to remove the page indent between the front matter 
% and the main matter.
\makeatletter
\renewcommand\mainmatter{%
  \pagenumbering{arabic}
  \@mainmattertrue}
\makeatother

\begin{document} 
% Front Bage
\begin{titlepage}
    \centering 
    \textcolor{titlecolor}{\noindent\rule{\textwidth}{2pt}}% top line
    \vspace{1cm}
    \textcolor{titlecolor}{\textbf{\Large RAPPORT DE TP}}\\[1cm] % Title of the page
    \textcolor{titlecolor}{TP 6: Apprentissage Profond}\\[1cm]
    \textcolor{titlecolor}{\noindent\rule{\textwidth}{2pt}}% bottom line
    \vspace{1cm}
    \begin{tabular}{lll} % Members of the group
        \textbf{\underline{Auteurs}:} & & \textbf{\underline{Enseignant}:}\\
        & & \\
        Thomas & DUCLOS \hspace{2cm} & M. DERRAZ \\
        Hugo & VIDAL & \\
        Sarah & ABERGEL & \\ 
    \end{tabular}\\[2cm]
    \vfill
    \begin{figure}[h] % Logo of the school
      \centering
      \includegraphics[width=0.5\textwidth]{img/ece.png}
    \end{figure}
    \vfill
    \begin{minipage}{\textwidth} % Signature
    Nous attestons que ce travail est original, qu'il est le fruit d'un travail commun au trinôme et qu'il a été rédigé de manière autonome.
    \begin{flushright}
      \textbf{Paris, le 05/04/2023}
    \end{flushright}
    \end{minipage}
\end{titlepage}

% Define the format of each chapter and section
\titleformat{\chapter}[hang]{\LARGE\bfseries}{\textcolor{titlecolor}{}}{0.5em}{\textcolor{titlecolor}}
\titleformat{\section}[hang]{\LARGE\bfseries}{\textcolor{titlecolor}{}}{0.5em}{\textcolor{titlecolor}}

\tableofcontents 

\clearpage % We want the table of contents to be on a separate page

\frontmatter

\chapter{Introduction}
Le but de ce TP est de mettre en place un réseau de neurones reccurent (RNN) et convolutionnel (CNN) simple afin de se familiariser avec ces modèles d'apprentissage profond
et la façon de les entrainer: la backpropagation du gradient.

\section{Liste des abréviations} % Use section to avoid having a new page
\begin{itemize}
  \item \textbf{RNN}: Réseau de Neurones Récurrents (Recurrent Neural Network en anglais)
  \item \textbf{CNN}: Réseau de Neurones Convolutifs (Convolutional Neura Network en anglais)
  \item \textbf{NN}: Réseau de Neurones (Neural Network en anglais)
\end{itemize}

% Redefine the format of each chapter and section
\titleformat{\chapter}[hang]{\LARGE\bfseries}{\textcolor{titlecolor}{Exercice \Roman{chapter} -}}{0.5em}{\textcolor{titlecolor}}
\titleformat{\section}[hang]{\LARGE\bfseries}{\textcolor{titlecolor}{\Alph{section} -}}{0.5em}{\textcolor{titlecolor}}

\mainmatter
\input{inputs/exercice_1.tex}
\input{inputs/exercice_2.tex}

\newpage
\appendix
\titleformat{\chapter}[hang]{\LARGE\bfseries}{\textcolor{titlecolor}{}}{0.5em}{\textcolor{titlecolor}}
\chapter{Annexes}\label{annexe}
\input{inputs/RNN.tex}
\input{inputs/CNN.tex}
\end{document}

